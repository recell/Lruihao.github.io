<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>弹球打砖块</title><link rel="icon" href="/images/favicon-32x32-next.png" type="image/x-icon"><style type="text/css">*{margin:0;padding:0;cursor:none}a{text-decoration:none}li,ul{list-style:none}body{font-size:14px;font-family:"微软雅黑";background:grey top/cover}#ball{width:15px;height:15px;background:#b4ff0d;border-radius:50%;position:absolute;top:0;left:0;box-shadow:0 0 9px 9px #f3ff67}#ward{width:120px;height:30px;z-index:999;background-color:#368;border-radius:10px;box-shadow:0 0 4px #333;position:absolute;left:0}#score{width:100px;height:100px;font-size:40px;position:absolute;right:40px;top:40px;color:#ff2541}#wrap{width:90%;height:500px;position:relative;top:100px;left:0;right:0;margin:auto}#wrap div{width:45px;height:15px;border:1px solid #ff645b;position:absolute;background:#ff6359;box-shadow:0 0 9px 1px #fb8 inset;top:0;left:0;transform-origin:top center}#gameover{position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;width:300px;height:200px;box-shadow:0 0 4px #222;background-color:#e1e1e1;display:none}#gameover p{width:100%;height:40px;text-align:center;font-size:36px;color:#368;margin-top:50px}#gameover span{width:60%;height:40px;display:block;margin:38px auto 0;text-align:center;font-size:20px;background:#368;color:#fff;border-radius:10px;line-height:40px}</style></head><body><button><a href="/games">返回游戏馆</a></button><div id="wrap"></div><div id="ball"></div><div id="ward"></div><div id="score">0分</div><div id="gameover"><p>总分:74</p><span>确定</span></div><script type="text/javascript">var oBall=document.querySelector("#ball"),oWard=document.querySelector("#ward"),oScore=document.querySelector("#score"),oWrap=document.querySelector("#wrap"),over=document.querySelector("#gameover");function Breakout(t,e,i,s,h){this.ball=t,this.ward=e,this.scores=i,this.wrap=s,this.over=h,this.x=0,this.y=0,this.score=0}Breakout.prototype={init:function(){this.ballstar(),this.creatBrick(),this.wardMove()},creatBrick:function(){for(var t=document.documentElement.offsetWidth/2-.05*document.documentElement.offsetWidth,e=1;e<=8;e++)for(var i=0;i<2*e-1;i++){var s=document.createElement("div");s.style.top=30*(e-1)+"px",s.style.left=t-90*e+90*i+"px",this.wrap.appendChild(s)}},wardMove:function(){this.ward.style.top=window.innerHeight-180+"px",this.ward.style.left=this.x-60+"px",this.addEvent(document,"mousemove",this.mouseMove.bind(this))},ballstar:function(){var t=this;this.y=window.innerHeight-200,this.x=window.innerWidth/2,this.ball.style.top=this.y+"px",this.ball.style.left=this.x+"px",this.ball.speed=10,this.ball.width=15,this.ball.height=15,document.onclick=function(){t.ballMove()}},mouseMove:function(t){var e=(t=t||window.event).pageX-this.ward.offsetWidth/2;e=Math.min(window.innerWidth-this.ward.offsetWidth,e),e=Math.max(0,e),this.ward.style.left=e+"px"},ballMove:function(){document.onclick=null,this.ball.xspeed=this.ball.speed,this.ball.yspeed=-this.ball.speed,function t(){this.x+=this.ball.xspeed,this.y+=this.ball.yspeed,this.crash(),this.ball.style.left=this.x+"px",this.ball.style.top=this.y+"px",requestAnimationFrame(t.bind(this))}.call(this)},crash:function(){var t=window.innerWidth-this.ball.offsetWidth,e=window.innerHeight-this.ball.offsetHeight;if(this.y>=e&&this.gameOver(),this.x>=t&&(this.ball.xspeed*=-1,this.x=t),this.x<0&&(this.ball.xspeed=this.ball.speed,this.x=0),this.y<0&&(this.ball.yspeed=this.ball.speed,this.y=0),Math.abs(this.x-(this.ward.offsetLeft+this.ward.clientWidth/2))<60&&Math.abs(this.y-this.ward.offsetTop-30)<45){var i=this.ranColor();this.ward.style.background=i,this.ball.yspeed*=-1,this.y=this.ward.offsetTop-40}for(var s=this.wrap.children.length-1;0<=s;s--){var h=this.ball.offsetLeft+this.ball.width/2,o=this.ball.offsetTop+this.ball.height/2,a=this.wrap.children[s].offsetLeft+this.wrap.offsetLeft+22.5,l=this.wrap.children[s].offsetTop+this.wrap.offsetTop+7.5;Math.abs(h-a)<=45&&Math.abs(o-l)<=15&&(this.ball.yspeed*=-1,this.y=l,this.wrap.removeChild(this.wrap.children[s]),0==this.wrap.children.length&&this.gameOver(),this.scoreChange())}},scoreChange:function(){this.score++,this.scores.innerHTML=this.score+"分"},gameOver:function(){this.over.style.display="block",this.over.children[0].innerHTML="总分:"+this.score;for(var t=document.querySelectorAll("*"),e=0;e<t.length;e++)t[e].style.cursor="auto";this.ward.style.display="none",this.ball.style.display="none",this.over.children[1].onclick=function(){window.location.reload()}},addEvent:function(t,e,i){return t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i,!1)},ranColor:function(){for(var t="#",e=0;e<6;e++)t+="0123456789abcdef"[Math.floor(16*Math.random())];return t}};var breakout=new Breakout(oBall,oWard,oScore,oWrap,over);breakout.init()</script></body></html>